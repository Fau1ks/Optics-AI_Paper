<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…‰å­¦+AIæœ€æ–°æ–‡çŒ®æ¨é€</title>
    <style>
        /* =================å…¨å±€æ ·å¼================= */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f6f8fa; color: #24292e; display: flex; flex-direction: column; align-items: center; padding: 40px 20px; text-align: center; }
        
        /* â˜…â˜…â˜… ä¿®æ”¹ 1ï¼šä¸æ»‘æ— ç¼çš„æµå…‰æ ‡é¢˜ â˜…â˜…â˜… */
        h1 {
            font-size: 2.2rem; 
            margin-bottom: 30px;
            /* å…³é”®ç‚¹ï¼šé¦–å°¾é¢œè‰²å¿…é¡»ç›¸åŒ (#0366d6)ï¼Œè¿™æ ·å¾ªç¯æ‰ä¸ä¼šå¡é¡¿ */
            background: linear-gradient(to right, #0366d6, #d939cd, #9d00ff, #0366d6);
            background-size: 200% auto; /* æ”¾å¤§èƒŒæ™¯ä»¥å®ç°æµåŠ¨ */
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent; 
            animation: shine 4s linear infinite; /* åŒ€é€ŸåŠ¨ç”» */
        }
        @keyframes shine {
            to { background-position: -200% center; }
        }

        .social-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; margin-bottom: 40px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .social-item { display: flex; flex-direction: column; align-items: center; width: 280px; line-height: 1.5; }
        .social-title { font-weight: bold; margin-bottom: 10px; font-size: 16px; }
        .qr-code { width: 150px; height: 150px; object-fit: cover; border-radius: 8px; border: 1px solid #e1e4e8; }
        
        /* ä¸‹è½½æŒ‰é’®æ ·å¼ */
        .download-btn { 
            background-color: #2ea44f; 
            color: white; 
            padding: 15px 40px; 
            font-size: 18px; 
            border-radius: 6px; 
            text-decoration: none; 
            transition: background-color 0.2s; 
            box-shadow: 0 4px 6px rgba(46, 164, 79, 0.2); 
            max-width: 90%; 
            word-break: break-all; 
        }
        .download-btn:hover { background-color: #2c974b; }
        .loading { background-color: #94d3a2; cursor: wait; }
        
        .update-time { margin-top: 15px; font-size: 14px; color: #0366d6; font-weight: 500; }
        .tips { margin-top: 5px; font-size: 12px; color: #586069; }
        
        /* æç¤ºæ¡†æ ·å¼ */
        .tips-container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 800px; width: 90%; margin-top: 50px; text-align: left; }
        .tips-container h2 { color: #333; font-size: 22px; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; text-align: center; }
        .tip-item { margin-bottom: 30px; }
        .tip-title { font-weight: bold; font-size: 16px; color: #0366d6; margin-bottom: 10px; display: block; }
        .tip-text { color: #555; font-size: 15px; line-height: 1.6; margin-bottom: 15px; }
        .img-row { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .tip-img { max-width: 100%; height: auto; border-radius: 6px; border: 1px solid #e1e4e8; box-shadow: 0 2px 4px rgba(0,0,0,0.05); display: block; margin: 0 auto; }
        .img-row .tip-img { width: calc(50% - 10px); min-width: 280px; }
        @media (max-width: 600px) { h1 { font-size: 22px; } }

        /* é˜…è¯»åŒºæ ·å¼ */
        .reading-container { width: 100%; max-width: 800px; text-align: left; margin-top: 40px; margin-bottom: 20px; }
        .reading-title { text-align: center; color: #333; font-size: 22px; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        /* â˜…â˜…â˜… ä¿®æ”¹ 2ï¼šæœŸåˆŠé—´è·å˜å° â˜…â˜…â˜… */
        .journal-group { 
            margin-bottom: 8px; /* åŸæ¥æ˜¯15pxï¼Œæ”¹å°æ›´ç´§å‡‘ */
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
            overflow: hidden; 
            border-left: 5px solid #0366d6; 
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-left 0.3s ease;
        }

        .journal-group:hover {
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); 
            border-left: 5px solid rgb(233, 163, 117); 
        }
        
        /* æœŸåˆŠæŒ‰é’®å¸ƒå±€ */
        .journal-btn { 
            width: 100%; 
            text-align: left; 
            padding: 15px 20px; 
            background: white; 
            border: none; 
            cursor: pointer; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 1.1rem; 
            font-weight: bold; 
            color: #24292e; 
            transition: 0.2s; 
            outline: none; 
        }
        .journal-btn:hover { background-color: #f1f8ff; }
        
        /* æ‰‹æœºç«¯é˜²æŒ¤å‹ */
        .journal-meta {
            display: flex;
            align-items: center;
            flex-shrink: 0;      
            white-space: nowrap; 
            margin-left: 10px;
        }

        .count-badge { background: #0366d6; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; margin-right: 10px; }
        .arrow { transition: transform 0.3s; font-size: 0.8rem; color: #aaa; }
        .journal-btn.active .arrow { transform: rotate(180deg); }
        
        .article-list { display: none; border-top: 1px solid #eee; }
        
        /* æ–‡ç« æ ‡é¢˜æŒ‰é’®æ ·å¼ */
        .article-btn { 
            width: 100%; 
            text-align: left; 
            padding: 12px 25px; 
            background: #fff; 
            border: none; 
            cursor: pointer; 
            font-size: 1rem; 
            color: #444; 
            line-height: 1.5; 
            border-bottom: 1px solid #f1f1f1; 
            transition: background-color 0.2s, padding-left 0.2s, color 0.2s;
        }
        
        .article-btn:hover { 
            color: #0366d6; 
            background: #f8faff;
            padding-left: 28px; 
        }
        
        .article-btn.active { color: #0366d6; font-weight: bold; background: #fafafa; }
        
        /* â˜…â˜…â˜… ä¿®æ”¹ 3ï¼šè¯¦æƒ…åŒºåŸŸä¹Ÿå¢åŠ åŠ¨æ•ˆ â˜…â˜…â˜… */
        .article-detail { 
            display: none; 
            padding: 15px 25px; 
            background-color: #fcfcfc; 
            border-bottom: 1px solid #eee; 
            /* æ–°å¢è¿‡æ¸¡æ•ˆæœ */
            transition: padding-left 0.2s ease, background-color 0.2s ease;
        }
        
        /* é¼ æ ‡æ‚¬åœåœ¨è¯¦æƒ…åŒºæ—¶ï¼Œå†…å®¹ä¹Ÿå¾®å¾®å³ç§»ï¼Œäº¤äº’æ›´ç»Ÿä¸€ */
        .article-detail:hover {
            padding-left: 28px; /* å’Œæ ‡é¢˜ç§»åŠ¨å¹…åº¦ä¿æŒä¸€è‡´ */
            background-color: #fff; /* ç¨å¾®å˜äº®ä¸€ç‚¹ç‚¹ */
        }
        
        .title-box-en { color: #555; margin-bottom: 10px; font-size: 0.95rem; font-family: sans-serif; font-weight: bold; line-height: 1.4; }
        .link-box { display: block; background: #e6f6ff; color: #0366d6; padding: 10px; border-radius: 4px; text-decoration: none; font-size: 0.9rem; word-break: break-all; border: 1px solid #bfe3ff; text-align: center; font-weight: 500; }
        .link-box:hover { background: #cceeff; }
        
        /* æœç´¢æ¡†æ ·å¼ */
        .search-container { width: 100%; max-width: 800px; margin: 20px auto 10px; }
        #searchInput { 
            width: 100%; 
            padding: 12px 20px; 
            border: 1px solid #e1e4e8; 
            border-radius: 25px; 
            font-size: 16px; 
            outline: none; 
            transition: all 0.3s; 
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            box-sizing: border-box; 
        }
        #searchInput:focus { 
            border-color: #0366d6; 
            box-shadow: 0 0 0 3px rgba(3, 102, 214, 0.3); 
        }
        .no-result { color: #666; margin-top: 20px; font-size: 14px; }
    </style>
</head>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<body>

    <h1>å…‰å­¦+AI æœ€æ–°æ–‡çŒ®æ¨é€</h1>

    <p style="color: #666; font-size: 15px; margin-top: -15px; margin-bottom: 25px; line-height: 1.6;">
        å¦‚éœ€å¾€æœŸæ–‡çŒ®ï¼Œå¯å…³æ³¨ä»¥ä¸‹è´¦å·<br>
        ä¹Ÿæ¬¢è¿å­¦æœ¯äº¤æµä»¥åŠæå‡ºæ‚¨çš„å»ºè®®
    </p>

    <div class="social-container">
        <div class="social-item">
            <div class="social-title">å°çº¢ä¹¦ï¼šè®¡ç®—å…‰å­¦æœ€æ–°æ–‡çŒ®æ¨é€</div>
            <img src="xhs.jpg" alt="å°çº¢ä¹¦äºŒç»´ç " class="qr-code">
        </div>
        <div class="social-item">
            <div class="social-title">å…¬ä¼—å·ï¼šè®¡ç®—å…‰å­¦æœ€æ–°æ–‡çŒ®æ¨é€</div>
            <img src="wx.jpg" alt="å…¬ä¼—å·äºŒç»´ç " class="qr-code">
        </div>
    </div>

    <a id="downloadBtn" href="#" class="download-btn loading">æ­£åœ¨æŸ¥æ‰¾æœ€æ–°æ¨é€...</a>
    <div id="fileTime" class="update-time">æ­£åœ¨è·å–æ›´æ–°æ—¶é—´...</div>
    <div class="tips">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç›´æ¥ä¸‹è½½æœ€æ–° Word æ–‡æ¡£</div>
    
    <div class="search-container" id="searchArea" style="display:none;">
        <input type="text" id="searchInput" placeholder="ğŸ” æœç´¢æ ‡é¢˜ã€ä½œè€…æˆ–æ‘˜è¦ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰..." oninput="searchPapers()">
    </div>

    <div class="reading-container" id="readingArea" style="display:none;">
        <div class="reading-title">ğŸ“– åœ¨çº¿é€Ÿè§ˆ</div>
        <div id="accordionContent"></div>
    </div>

    <div style="width: 100%; max-width: 800px; margin: 30px auto; text-align: center; font-size: 13px; color: #888;">
        <span id="busuanzi_container_site_pv" style="display:none">
            ğŸ‘€ æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv" style="font-weight:bold; color:#0366d6;"></span> æ¬¡
        </span>
        <span style="margin: 0 10px; color: #ddd;">|</span>
        <span id="busuanzi_container_site_uv" style="display:none">
            ğŸ‘¤ è®¿å®¢æ•° <span id="busuanzi_value_site_uv" style="font-weight:bold; color:#0366d6;"></span> äºº
        </span>
    </div>      
    
    <div class="tips-container">
        <h2>ğŸ’¡ ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
        <div class="tip-item">
            <span class="tip-title">1. æé«˜é˜…è¯»æ•ˆç‡ï¼šå»ºè®®å¼€å¯å¯¼èˆªçª—æ ¼</span>
            <p class="tip-text">ä¸ºäº†æ›´æ–¹ä¾¿åœ°æµè§ˆé•¿æ–‡æ¡£ï¼Œå»ºè®®åœ¨ Word é¡¶éƒ¨èœå•æ é€‰æ‹© <strong>â€œè§†å›¾â€</strong>ï¼Œå¹¶å‹¾é€‰ <strong>â€œå¯¼èˆªçª—æ ¼â€</strong>ã€‚</p>
            <img src="remind1.jpg" alt="å¼€å¯å¯¼èˆªçª—æ ¼æ¼”ç¤º" class="tip-img">
        </div>
        <hr style="border: 0; border-top: 1px dashed #eee; margin: 30px 0;">
        <div class="tip-item">
            <span class="tip-title">2. å…³äº DOI é“¾æ¥è·³è½¬</span>
            <p class="tip-text">è‹¥ Word æ–‡æ¡£ä¸­çš„è“è‰²é“¾æ¥ç‚¹å‡»æ— ååº”ï¼Œè¯·å°è¯•<strong>å¤åˆ¶é“¾æ¥</strong>å¹¶ç²˜è´´åˆ°æµè§ˆå™¨åœ°å€æ ä¸­è®¿é—®ã€‚</p>
            <div class="img-row">
                <img src="remind2.jpg" alt="Wordä¸­æ— æ³•è·³è½¬ç¤ºæ„" class="tip-img">
                <img src="remind3.jpg" alt="æµè§ˆå™¨æ­£å¸¸è®¿é—®ç¤ºæ„" class="tip-img">
            </div>
        </div>
    </div>

    <script>
        const GITHUB_USERNAME = 'Fau1ks'; 
        const REPO_NAME = 'Optics-AI_Paper';        

        const contentApiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/`;
        const btn = document.getElementById('downloadBtn');
        const timeDiv = document.getElementById('fileTime');

        // 1. é˜²ä¹±ç å·¥å…·å‡½æ•°
        function escapeHtml(text) {
            if (!text) return "";
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // 2. ä¸‹è½½æŒ‰é’®é€»è¾‘
        fetch(contentApiUrl)
            .then(response => response.json())
            .then(data => {
                const wordFiles = data.filter(item => item.name.startsWith('Optical_Papers_') && item.name.endsWith('.docx'));
                if (wordFiles.length === 0) {
                    btn.innerText = "ä»Šæ—¥æš‚æ— æ¨é€";
                    btn.style.backgroundColor = "#666"; 
                    timeDiv.style.display = 'none';
                    return;
                }
                wordFiles.sort((a, b) => a.name.localeCompare(b.name));
                const latestFile = wordFiles[wordFiles.length - 1];
                const dateCode = latestFile.name.replace('Optical_Papers_', '').replace('.docx', '');
                
                btn.innerText = "ğŸ“„ ä¸‹è½½æœ€æ–°æ¨é€ï¼š" + dateCode; 
                btn.href = latestFile.download_url; 
                btn.classList.remove('loading'); 
                btn.setAttribute("target", "_blank");

                const commitApiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/commits?path=${latestFile.name}&page=1&per_page=1`;
                fetch(commitApiUrl)
                    .then(res => res.json())
                    .then(commits => {
                        if (commits && commits.length > 0) {
                            const dateObj = new Date(commits[0].commit.committer.date);
                            timeDiv.innerText = "æœ€åæ›´æ–°æ—¶é—´ï¼š" + dateObj.toLocaleString('zh-CN', { hour12: false });
                        }
                    }).catch(() => timeDiv.innerText = "");
            })
            .catch(error => {
                console.error('Error:', error);
                btn.innerText = "è·å–åˆ—è¡¨å¤±è´¥";
                btn.style.backgroundColor = "#d73a49";
            });

        // 3. æ•°æ®è·å–ä¸æ¸²æŸ“
        let allPapersData = []; 

        fetch('latest_data.json')
            .then(response => response.json())
            .then(data => {
                if (!data || data.length === 0) return;
                allPapersData = data;
                document.getElementById('readingArea').style.display = 'block';
                document.getElementById('searchArea').style.display = 'block'; 
                
                // é»˜è®¤æŠ˜å 
                renderPapers(allPapersData, false);
            })
            .catch(err => {
                console.log("ä»Šæ—¥æš‚æ— æ•°æ®æˆ–è¯»å–å¤±è´¥", err);
            });

        function renderPapers(papersToRender, expandAll = false) {
            const container = document.getElementById('accordionContent');
            
            if (!papersToRender || papersToRender.length === 0) {
                container.innerHTML = '<div class="no-result" style="text-align:center; color:#666; padding:20px;">ğŸ˜• æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡çŒ®ï¼Œæ¢ä¸ªå…³é”®è¯è¯•è¯•ï¼Ÿ</div>';
                return;
            }

            const papersByJournal = {};
            papersToRender.forEach(paper => {
                const j = escapeHtml(paper.journal || 'Unknown Journal');
                if (!papersByJournal[j]) papersByJournal[j] = [];
                papersByJournal[j].push(paper);
            });

            const activeClass = expandAll ? 'active' : '';
            const arrowStyle = expandAll ? 'transform: rotate(180deg);' : '';
            const listStyle = expandAll ? 'display: block;' : 'display: none;';

            let html = '';
            for (const [journal, papers] of Object.entries(papersByJournal)) {
                html += `
                <div class="journal-group">
                    <button class="journal-btn ${activeClass}" onclick="toggleAccordion(this)">
                        <span>${journal}</span>
                        <div class="journal-meta">
                            <span class="count-badge">${papers.length}</span>
                            <span class="arrow" style="${arrowStyle}">â–¼</span>
                        </div>
                    </button>
                    <div class="article-list" style="${listStyle}">
                `;
                
                papers.forEach(paper => {
                    const titleCn = escapeHtml(paper.title_cn || paper.title);
                    const titleEn = escapeHtml(paper.title);
                    const author = escapeHtml(paper.author || 'Unknown Author');
                    const idLink = paper.id || paper.link || '#';
                    
                    html += `
                        <div class="article-item">
                            <button class="article-btn" onclick="toggleAccordion(this)">${titleCn}</button>
                            <div class="article-detail">
                                <div class="title-box-en">
                                    <span style="background:#eee;padding:2px 6px;border-radius:4px;font-size:0.75em;color:#666;margin-right:5px;">English</span>
                                    ${titleEn}
                                </div>
                                
                                <div style="font-size:13px; color:#555; margin:10px 0; line-height:1.4;">
                                    <strong>ğŸ‘¤ Authors:</strong> ${author}
                                </div>
                                
                                <a href="${idLink}" target="_blank" class="link-box">ğŸ”— ${idLink}</a>
                            </div>
                        </div>
                    `;
                });
                html += `</div></div>`;
            }
            container.innerHTML = html;
        }

        // 4. æœç´¢åŠŸèƒ½
        function searchPapers() {
            const input = document.getElementById('searchInput');
            if(!input) return;
            const query = input.value.toLowerCase().trim();

            if (!query) {
                renderPapers(allPapersData, false);
                return;
            }

            const filteredData = allPapersData.filter(paper => {
                const titleEn = (paper.title || '').toLowerCase();
                const titleCn = (paper.title_cn || '').toLowerCase();
                const author = (paper.author || '').toLowerCase();
                const abstractEn = (paper.summary || '').toLowerCase();
                const abstractCn = (paper.abstract_cn || '').toLowerCase();

                return titleEn.includes(query) || 
                       titleCn.includes(query) || 
                       author.includes(query) || 
                       abstractEn.includes(query) || 
                       abstractCn.includes(query);
            });

            renderPapers(filteredData, true);
        }

        // 5. äº¤äº’åŠ¨ç”»
        function toggleAccordion(element) {
            if (!element) return;
            element.classList.toggle("active");
            const content = element.nextElementSibling;
            if (content) {
                const arrow = element.querySelector('.arrow');
                if (content.style.display === "block") {
                    content.style.display = "none";
                    if(arrow) arrow.style.transform = "rotate(0deg)";
                } else {
                    content.style.display = "block";
                    if(arrow) arrow.style.transform = "rotate(180deg)";
                }
            }
        }
    </script>
</body>
</html>
